/* JetBrains Mono import */
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&display=swap');

:root {
  --bg: #ffffff;
  --fg: #111111;
  --muted: #666666;
  --border: #e5e5e5;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'JetBrains Mono', monospace;
  background: var(--bg);
  color: var(--fg);
  line-height: 1.65;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

 a { color: inherit; text-decoration: none; }
img { max-width: 100%; height: auto; }

.container { max-width: 1120px; margin: 0 auto; padding: 24px; }
.grid { display: grid; gap: 24px; }
.grid-3 { grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); }
.card {
  border: 1px solid var(--border);
  padding: 16px;
}

header, footer {
  border-bottom: 1px solid var(--border);
}
footer { border-top: 1px solid var(--border); border-bottom: none; }


main { flex: 1; display: block; }

nav a { margin-right: 16px; }
nav a.active { text-decoration: underline; }

h1, h2, h3 { line-height: 1.3; }
hr { border: none; border-top: 1px solid var(--border); margin: 24px 0; }

.muted { color: var(--muted); }

.post-content h2 { margin-top: 1.5em; }
.post-content h2, .post-content h3 { scroll-margin-top: 80px; }
.post-content pre { background: #f6f6f6; padding: 12px; overflow: auto; }
.post-content code { font-family: 'JetBrains Mono', monospace; }

/* Post three-column layout */
.post-layout {
  display: grid;
  grid-template-columns: 220px 1fr 300px;
  gap: 24px;
  align-items: start;
}

.post-toc ul, .post-toc .toc-list { list-style: none; padding: 0; margin: 0; }
.post-toc li { margin: 4px 0; }
.post-toc li.d3 { margin-left: 12px; }
.post-toc a { 
  color: var(--muted); 
  display: -webkit-box; 
  -webkit-line-clamp: 2; 
  line-clamp: 2; /* standard future property */
  -webkit-box-orient: vertical; 
  overflow: hidden; 
  text-overflow: ellipsis; 
  font-size: 13px; 
  line-height: 1.3; 
  transition: color .15s ease; 
}
.post-toc a:hover { text-decoration: underline; color: var(--fg); }
.post-toc a.active { color: var(--fg); font-weight: 500; }
.post-toc { font-size: 13px; }
.post-toc .toc-title { margin-bottom: 6px; }
/* Sticky TOC (no internal inner scrollbar) */
.post-toc { position: sticky; top: 24px; align-self: start; }

/* Provide a subtle vertical rule for depth layering (optional) */
.post-toc li.d3 a { position: relative; }
.post-toc li.d3 a:before { content: ''; position: absolute; left: -8px; top: 4px; bottom: 4px; width: 2px; background: var(--border); }

/* Remove obsolete rule */

/* Toggle button for subsections */
.toc-toggle { 
  margin-top: 6px; 
  background: none; 
  border: 1px solid var(--border); 
  font-family: inherit; 
  font-size: 11px; 
  padding: 4px 6px; 
  cursor: pointer; 
  color: var(--muted); 
}
.toc-toggle:hover { background:#f5f5f5; color: var(--fg); }
.toc-title { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--muted); margin-bottom: 8px; }

.post-main { min-width: 0; }
.post-aside { min-width: 0; }
.sticky { position: sticky; top: 24px; }

/* Constrain readable line length; center article inside its grid cell */
.post-main { max-width: 72ch; }
.post-main, .post-main > *:not(.full-width) { margin-left: auto; margin-right: auto; }

/* Allow elements (like wide code blocks) to opt-out via .full-width */
.post-main .full-width { width: 100%; max-width: none; }

@media (min-width: 1400px) {
  .container { max-width: 1320px; }
  .post-layout { grid-template-columns: 220px 1fr 300px; }
  .post-main { max-width: 78ch; }
}


@media (max-width: 1180px) {
  .post-layout { grid-template-columns: 1fr; }
  .post-toc { display: none; }
  .post-aside { display: block; margin-top: 8px; }
  .post-aside .card ad { display: flex; justify-content: center; }
  .sticky { position: static; top: auto; }
}
